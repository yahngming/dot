#!/bin/sh

wallpaper=~/Pictures/wallpapers/wallpaper
weatherpaper=~/Pictures/wallpapers/weatherpaper.png

if [ "$QT_STYLE_OVERRIDE" == "Windows" ] || [ ! -f "$wallpaper" ]; then
	exit
fi
convert "$wallpaper" <( curl wttr.in/_tqp0.png ) -geometry +100+100 -composite "$weatherpaper"
if [ -n "$WAYLAND_DISPLAY" ]; then
	hyprctl dispatch exec hyprpaper
	hyprctl hyprpaper unload all
	hyprctl hyprpaper preload "$weatherpaper"
	hyprctl hyprpaper wallpaper ,"$weatherpaper"
elif [ -n "$DISPLAY" ]; then
	xwallpaper --zoom "$weatherpaper"
fi
