#!/bin/sh

bat() {
	printf " ï‡¦ "
	printf " $(cat /sys/class/power_supply/BAT0/capacity)"
}

brt() {
	printf " ï‚ "
	printf " %.0f\n" $(cat /sys/class/backlight/*/brightness)
}

clk() {
	printf " â² "
	printf " $(date '+%H:%M') "
}

cpu() {
	printf " ï’¼ "
	printf " $(sed 's/000$/Â°C/' /sys/class/thermal/thermal_zone0/temp)"
}

cut() {
	IFS=$2
	set -- $1
	printf '%s' "$@"
}

ram() {
	printf " î‰¦ "
	printf " $(free -h | awk '(NR==2){ print $4 }' | sed s/i//g)"
}

net() {
	case "$(cat /sys/class/net/wl*/operstate 2>/dev/null)" in
		up) printf " ó°¤¨ %s" " Connected" ;;
		down) printf " ó°¤­ %s" " Disconnected" ;;
	esac
}

vol() {
	vol="$(wpctl get-volume @DEFAULT_AUDIO_SINK@)"
	vol="${vol#Volume: }"
	vol="$(printf "%.0f" "$(cut "$vol" ".")")"
	printf " ðŸ”Š "
	printf " $vol "
}

while true; do
	sleep 1 && xprop -root -set WM_NAME "$(cpu) $(ram) $(net) $(brt) $(bat) $(vol) $(clk)"
done
