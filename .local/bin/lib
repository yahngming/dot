#!/bin/sh

proxy() {
	PROXY_ENV="all_proxy ALL_PROXY ftp_proxy FTP_PROXY http_proxy HTTP_PROXY https_proxy HTTPS_PROXY"
	for envar in $PROXY_ENV; do
		export $envar="http://127.0.0.1:7890"
	done
	gsettings set org.gnome.system.proxy mode "manual"
}

theme() {
	case "$THEME" in
		*dark*  ) touch -f ~/.config/dark ;;
		*light* ) rm -f ~/.config/dark ;;
	esac
	if [ -f ~/.config/dark ]; then
		export COLOR_SCHEME="prefer-dark"
		export GTK_THEME="Adwaita-dark"
		export HYPRCURSOR_THEME="Bibata-Modern-Ice"
		export ICON_THEME="Adwaita"
		export XCURSOR_THEME="Bibata-Modern-Ice"
	else
		export COLOR_SCHEME="prefer-light"
		export GTK_THEME="Adwaita"
		export HYPRCURSOR_THEME="Bibata-Modern-Classic"
		export ICON_THEME="Adwaita"
		export XCURSOR_THEME="Bibata-Modern-Classic"
	fi
	case "$XDG_VTNR" in
		1)
			export GUI="Hyprland"
			export LAUNCHER="fuzzel"
			export TERMINAL="foot"
			;;
		2)
			export GUI="startx ~/.config/xorg/xinitrc dwm"
			export LAUNCHER="dmenu"
			export TERMINAL="st"
			;;
		3)
			export COLOR_SCHEME="prefer-light"
			export GTK_THEME="Chicago95"
			export GUI="startx ~/.config/xorg/xinitrc xfce"
			export ICON_THEME="Chicago95"
			export LAUNCHER="xfce4-appfinder"
			export QT_STYLE_OVERRIDE="Windows"
			export TERMINAL="xfce4-terminal"
			export XCURSOR_THEME="Chicago95 Standard Cursors"
			;;
	esac
	case "$LAUNCHER" in
		fuzzel ) export MENU="fuzzel --dmenu" ;;
		rofi   ) export MENU="rofi -dmenu" ;;
		walker ) export MENU="walker --dmenu --keepsort" ;;
		*      ) export MENU="dmenu" ;;
	esac
	gsettings set org.gnome.desktop.interface color-scheme "$COLOR_SCHEME"
	gsettings set org.gnome.desktop.interface cursor-theme "$XCURSOR_THEME"
	gsettings set org.gnome.desktop.interface gtk-theme "$GTK_THEME"
	gsettings set org.gnome.desktop.interface icon-theme "$ICON_THEME"
	if [ -n "$WAYLAND_DISPLAY" ] && [ -f ~/.config/wal/colorschemes/$THEME.css ]; then
		cat ~/.config/wal/colorschemes/$THEME.css > ~/.config/waybar/colors.css
		hyprctl setcursor $HYPRCURSOR_THEME 24
	fi
}
