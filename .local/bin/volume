#!/bin/sh

bar() {
	notify-send -h string:x-canonical-private-synchronous:volume -h int:value:$(echo "(" "`wpctl get-volume $id | sed 's/.* //'`" "*100+0.5)/1" | bc) " "
}

get() {
	wpctl get-volume $id && bar
}

down() {
	wpctl set-volume $id 2%- && bar
}

up() {
	wpctl set-volume $id 2%+ -l 1 && bar
}

mute() {
	wpctl set-mute $id 1
}

unmute() {
	wpctl set-mute $id 0
}

toggle() {
	wpctl set-mute $id toggle
}

help() {
	echo "Usage:"
	echo "  volume [COMMAND] [ID]"
	echo ""
	echo "Commands:"
	echo "  get           show volume"
	echo "  up            volume up"
	echo "  down          volume down"
	echo "  mute          mute"
	echo "  unmute        unmute"
	echo "  toggle        toggle mute"
	echo "  help          display help"
	echo ""
	echo "Device ID defaults to @DEFAULT_SINK@ when not specified."
	echo "Device ID for microphone is @DEFAULT_SOURCE@."
}

id=${2:-@DEFAULT_SINK@}
case "$1" in
	get|down|up|mute|unmute|toggle ) $1 ;;
	*                              ) help ;;
esac
