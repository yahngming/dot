#!/bin/sh

ps() {
	if [ -n "$name" ]; then
		docker ps -aq --filter "name=$name" > /dev/null && echo "$name running" || echo "$name stopped"
	else
		docker ps
	fi
}

start() {
	if [ -n "$name" ]; then
		docker compose -f "$folder/$name.yaml" up -d
	else
		for f in $folder/*.yaml
		do
			docker compose -f "$f" up -d
		done
	fi
}

stop() {
	if [ -n "$name" ]; then
		docker compose -f "$folder/$name.yaml" stop
	else
		for f in $folder/*.yaml
		do
			docker compose -f "$f" stop
		done
	fi
}

help() {
	echo "Usage:"
	echo "  dockers [COMMAND] [NAME]"
	echo ""
	echo "Commands:"
	echo "  ps           list container(s)"
	echo "  start        start container(s)"
	echo "  stop         stop container(s)"
	echo ""
	echo "All containers will be applied if NAME is omitted."
}

folder="$HOME/.config/dockers"
name=$2
case "$1" in
	ps|start|stop ) $1 ;;
	*             ) help ;;
esac
