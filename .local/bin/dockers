#!/bin/sh

start() {
	sudo systemctl start docker.service
	docker compose -f "~/.config/dockers/$1.yaml" up -d
}

stop() {
	docker compose -f "~/.config/dockers/$1.yaml" stop
	sudo systemctl stop docker.socket
	sudo systemctl stop docker.service
}

status() {
	id=$(docker ps -aq --filter "name=$1")
	if [ -n "$id" ]; then
		echo "$1 running"
	else
		echo "$1 stopped"
	fi
}

help() {
	echo "Usage: dockers [start|stop|status]"
}

name=${2:-all}
case "$1" in
	start|stop|status ) $1 ;;
	*                 ) help ;;
esac
