#!/bin/sh

down() {
	for f in ~/.config/docker/*.yaml
	do
		docker compose -f "$f" stop
	done
	sudo systemctl stop docker.socket
	sudo systemctl stop docker.service
}

up() {
	sudo systemctl start docker.service
	for f in ~/.config/docker/*.yaml
	do
		docker compose -f "$f" up -d
	done
}

status() {
	case "$(systemctl is-active docker.service)" in
		active   ) docker ps ;;
		inactive ) echo "docker.service inactive / docker.socket $(systemctl is-active docker.socket)"
	esac
}

help() {
	echo "Usage: dockers [down|up]"
}

case "$@" in
	help|down|up ) $@ ;;
	*            ) status ;;
esac
