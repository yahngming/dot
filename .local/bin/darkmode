#!/bin/sh

auto() {
	if [[ "$(date +%H:%M)" < "06:00" ]] || [[ "$(date +%H:%M)" > "18:00" ]]; then
		dark
	else
		light
	fi
	systemctl --user start sun@darkmode.timer
	systemctl --user enable sun@darkmode.timer
}

dark() {
	if [ ! -f ~/.config/dark ]; then
		touch -f ~/.config/dark
		theme
	fi
	systemctl --user stop sun@darkmode.timer
	systemctl --user disable sun@darkmode.timer
}

light() {
	if [ -f ~/.config/dark ]; then
		rm -f ~/.config/dark
		theme
	fi
	systemctl --user stop sun@darkmode.timer
	systemctl --user disable sun@darkmode.timer
}

help() {
	echo "Usage: darkmode [MODE]"
	echo "    auto         auto switch"
	echo "    dark         dark mode"
	echo "    light        light mode"
}

mode=${1:-help}
$mode
