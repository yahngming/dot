#!/bin/sh

menu="\
󰔎 Auto switch\n\
 Dark mode\n\
 Light mode\n\
"

if [ "$(systemctl --user is-active sun@themeauto.timer)" == "active" ]; then
	current="auto"
elif [ -f ~/.config/dark ]; then
	current="dark"
else
	current="light"
fi

case $(printf "$menu" | menu -p "$current mode activated" "$@") in
	*Auto*)
		theme auto
		systemctl --user enable --now sun@themeauto.timer
		;;
	*Dark*)
		theme dark
		systemctl --user disable --now sun@themeauto.timer
		;;
	*Light*)
		theme light
		systemctl --user disable --now sun@themeauto.timer
		;;
esac
