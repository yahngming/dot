#!/bin/sh

source ~/.local/bin/lib

case "$MENU" in
	dmenu ) opt="-noi" ;;
esac

menu="\
Auto switch\n\
Dark mode\n\
Light mode\n\
"

service="sun@darkmode.timer"

case $(printf "$menu" | $MENU $opt "$@") in
	*Auto*)
		darkmode
		systemctl --user start $service
		systemctl --user enable $service
		;;
	*Dark*)
		touch -f ~/.config/dark
		theme
		systemctl --user stop $service
		systemctl --user disable $service
		;;
	*Light*)
		rm -f ~/.config/dark
		theme
		systemctl --user stop $service
		systemctl --user disable $service
		;;
esac
