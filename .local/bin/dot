#!/bin/sh

cd ~/.local/src/dot
git pull
cp -a ~/.local/src/dot/. ~/
chmod +x ~/.local/bin/* ~/.config/nsxiv/exec/*
rm -rf ~/.git ~/postinstall.sh ~/README.md
source ~/.cache/wal/colors.sh
sed -i "s/background-color=.*/background-color=${color0}dd/" "$HOME/.config/mako/config"
sed -i "s/border-color=.*/border-color=${color3}dd/" "$HOME/.config/mako/config"
sed -i "s/text-color=.*/text-color=${color7}dd/" "$HOME/.config/mako/config"
sed -i "s/progress-color=.*/progress-color=${color7}dd/" "$HOME/.config/mako/config"
sed -i '/background = /s/.*/background = "'$color0'"/' "$HOME/.config/dunst/dunstrc"
sed -i '/foreground = /s/.*/foreground = "'$color7'"/' "$HOME/.config/dunst/dunstrc"
sed -i '/frame_color = /s/.*/frame_color = "'$color3'"/' "$HOME/.config/dunst/dunstrc"
cd - >/dev/null 2>&1
pgrep qutebrowser >/dev/null && qutebrowser :config-source

if [ "$BROWSER" == "firefox" ]; then
	cd ~/.config/firefox
	chmod +x *.sh
	./updater.sh
	./prefsCleaner.sh
	cd - >/dev/null 2>&1
fi
