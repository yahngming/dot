#!/bin/sh

case "$LAUNCHER" in
	dmenu ) opt="-noi" ;;
esac

menu="\
󰨇 Open dashboard\n\
󰌙 Turn OFF\n\
󱊪 Turn ON\n\
"

case $(printf "$menu" | menu $opt -p "Proxy" "$@") in
	*dashboard*)
		xdg-open http://127.0.0.1:9090/ui/
		;;
	*OFF*)
		rm -f ~/.config/proxy
		gsettings set org.gnome.system.proxy mode "none"
		sudo systemctl stop sing-box.service
		sudo systemctl disable sing-box.service
		;;
	*ON*)
		touch -f ~/.config/proxy
		gsettings set org.gnome.system.proxy mode "manual"
		sudo systemctl enable sing-box.service
		sudo systemctl start sing-box.service
		;;
esac
