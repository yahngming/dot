#!/bin/sh

if pgrep -f "st -F -c screensaver" || pgrep locker || [ ! -f ~/.config/screensaver ]; then
	exit
fi

readarray -t screensavers < <(grep -vE '^\s*(#|$)' ~/.config/screensaver)
screensaver=${screensavers[$(($RANDOM%${#screensavers[@]}))]}
st -F -c screensaver -e $SHELL -c "$screensaver"
